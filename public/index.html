<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#134e4a" />
    <meta name="description" content="Mobile Medikamenten-Inventur mit Cloudflare." />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="icon" href="/icons/icon-512.svg" type="image/svg+xml" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=Fraunces:opsz,wght@9..144,600&display=swap"
      rel="stylesheet"
    />
    <title>MedInv</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-a"></div>
    <div class="bg-shape bg-shape-b"></div>

    <main class="app-shell">
      <header class="hero">
        <p class="eyebrow">Medikamente im Blick</p>
        <h1>MedInv</h1>
        <p class="hero-copy">
          Einfache Inventur: per Tastatur erfassen oder per Foto/Kamera automatisch vorfuellen.
        </p>
        <button id="install-btn" class="install-btn hidden" type="button">
          App installieren
        </button>
      </header>

      <section class="panel">
        <h2>1) Eintrag erfassen</h2>
        <form id="entry-form" class="entry-form">
          <label>
            Medikamentenname
            <input id="name" name="name" autocomplete="off" required maxlength="120" />
          </label>
          <label>
            Hersteller
            <input id="manufacturer" name="manufacturer" autocomplete="off" required maxlength="120" />
          </label>
          <label>
            Zentraler Wirkstoff
            <input
              id="activeIngredient"
              name="activeIngredient"
              autocomplete="off"
              required
              maxlength="160"
            />
          </label>
          <label>
            Ablaufdatum
            <input id="expiryDate" name="expiryDate" type="date" required />
          </label>
          <button id="save-btn" class="primary-btn" type="submit">Speichern</button>
        </form>
        <p id="status-message" class="status-message" role="status"></p>
      </section>

      <section class="panel">
        <h2>2) Foto/Kamera nutzen</h2>
        <p class="hint">
          Foto machen, Text lesen lassen und Werte bei Bedarf anpassen. Danach mit "Speichern" sichern.
        </p>
        <div class="photo-row">
          <input id="photo-input" type="file" accept="image/*" capture="environment" />
          <button id="scan-photo-btn" type="button" class="secondary-btn">Text aus Foto lesen</button>
        </div>
        <img id="photo-preview" class="photo-preview hidden" alt="Vorschau des aufgenommenen Fotos" />
        <p id="ocr-status" class="ocr-status" role="status"></p>
        <details class="ocr-details">
          <summary>Erkannten Rohtext anzeigen</summary>
          <pre id="ocr-text"></pre>
        </details>
      </section>

      <section class="panel">
        <div class="inventory-head">
          <h2>Inventur</h2>
          <button id="reload-btn" type="button" class="ghost-btn">Aktualisieren</button>
        </div>
        <p id="empty-state" class="hint hidden">Noch keine Eintraege vorhanden.</p>
        <div id="inventory-list" class="inventory-list"></div>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script type="module" src="/app.js"></script>
  </body>
</html>

